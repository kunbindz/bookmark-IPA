{"version":3,"sources":["assets/icons/games/correct-word.png","components/PlayGames/CorrectWord/index.js","components/PlayGames/CorrectWord/data.js","pages/PlayGames/CorrectWord.js"],"names":["shuffleAnswers","word","phonetic","wrongList","sort","Math","random","addClassAnswerItem","status","answerIndex","index","answer","CorrectWord","list","classes","useStyle","useSpeaker","voice","speed","volume","isSubscribe","useRef","useState","current","nRight","nWrong","answerList","state","setState","isDone","setIsDone","nQuestion","length","mean","nRightConsecutive","top","n","useEffect","className","root","src","logoGame","alt","onReplay","summary","summaryIcon","mainContent","style","visibility","result","question","answers","map","onClick","playSoundAnswer","setTimeout","newAnswerList","preState","UX","DELAY_ANSWER","onAnswer","answerItem","defaultProps","CorrectWordData","wordPack","setWordPack","dispatch","useDispatch","history","useHistory","getWordPackage","a","type","topics","level","specialty","gameApi","getWordPackCWG","apiRes","data","setMessage","message","duration","response","WordPack","open","onChoose","onCancel","goBack","topicMultiples","title","okBtnText","cancelBtnText","cancelBtnProps","startIcon","okBtnProps","InputCustom","inputProps","min","max","defaultValue","placeholder","label","onChange","e","target","value","GlobalLoading","CorrectWordPage","useTitle","useCloseNavigation"],"mappings":"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","file":"static/js/22.dac4e01d.chunk.js","sourcesContent":["export default \"data:image/png;base64,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\"","import WrongIcon from '@material-ui/icons/Cancel';\r\nimport RightIcon from '@material-ui/icons/CheckCircle';\r\nimport logoGame from 'assets/icons/games/correct-word.png';\r\nimport { UX } from 'constant';\r\nimport { playSoundAnswer } from 'helper/speaker.helper';\r\nimport useSpeaker from 'hooks/useSpeaker';\r\nimport PropTypes from 'prop-types';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport CorrectWordResult from '../Result';\r\nimport useStyle from './style';\r\n\r\nfunction shuffleAnswers(word, phonetic, wrongList) {\r\n  let mergeList = [...wrongList, { word, phonetic }];\r\n  return mergeList.sort(() => Math.random() - 0.5);\r\n}\r\n\r\nfunction addClassAnswerItem(status, answerIndex, index, word, answer) {\r\n  if (status !== 0) {\r\n    if (word === answer) return 'right';\r\n    if (answerIndex === index) return 'wrong';\r\n  }\r\n  return '';\r\n}\r\n\r\nfunction CorrectWord({ list }) {\r\n  const classes = useStyle();\r\n  const { voice, speed, volume } = useSpeaker();\r\n\r\n  // fix Can't perform a React state update on an unmounted component\r\n  const isSubscribe = useRef(true);\r\n\r\n  const [state, setState] = useState({\r\n    current: 0,\r\n    nRight: 0,\r\n    nWrong: 0,\r\n    // status 0 - reading question, 1 - show right result, 2 - show wrong result\r\n    status: 0,\r\n    answerList: shuffleAnswers(\r\n      list[0]?.word,\r\n      list[0]?.phonetic,\r\n      list[0]?.wrongList,\r\n    ),\r\n    answerIndex: -1,\r\n  });\r\n  const [isDone, setIsDone] = useState(false);\r\n\r\n  const nQuestion = list.length;\r\n  const { status, current, nRight, nWrong, answerList, answerIndex } = state;\r\n  const { word, mean } = list[state.current];\r\n  const nRightConsecutive = useRef({ top: 0, n: 0 });\r\n\r\n  // fix Can't perform a React state update on an unmounted component\r\n  useEffect(() => {\r\n    return () => (isSubscribe.current = false);\r\n  }, []);\r\n\r\n  const onAnswer = (answer, answerIndex) => {\r\n    if (answer === word) {\r\n      playSoundAnswer(word, true, voice, volume, speed);\r\n      setState({\r\n        ...state,\r\n        nRight: nRight + 1,\r\n        status: 1,\r\n        answerIndex,\r\n      });\r\n      nRightConsecutive.current.n++;\r\n    } else {\r\n      playSoundAnswer(word, false, voice, volume, speed);\r\n      setState({\r\n        ...state,\r\n        nWrong: nWrong + 1,\r\n        status: 2,\r\n        answerIndex,\r\n      });\r\n      const { top, n } = nRightConsecutive.current;\r\n      if (top < n) nRightConsecutive.current.top = n;\r\n    }\r\n\r\n    // wait to speak the word if not last question\r\n    if (current !== list.length - 1) {\r\n      setTimeout(() => {\r\n        const newAnswerList = shuffleAnswers(\r\n          list[current + 1]?.word,\r\n          list[current + 1]?.phonetic,\r\n          list[current + 1]?.wrongList,\r\n        );\r\n\r\n        isSubscribe.current &&\r\n          setState((preState) => ({\r\n            ...preState,\r\n            status: 0,\r\n            answerIndex: -1,\r\n            current: current + 1,\r\n            answerList: newAnswerList,\r\n          }));\r\n      }, UX.DELAY_ANSWER);\r\n    } else {\r\n      setTimeout(() => {\r\n        isSubscribe.current && setIsDone(true);\r\n      }, UX.DELAY_ANSWER);\r\n    }\r\n  };\r\n\r\n  const handleReplay = () => {\r\n    setIsDone(false);\r\n    setState({\r\n      current: 0,\r\n      nRight: 0,\r\n      nWrong: 0,\r\n      // status 0 - reading question, 1 - show right result, 2 - show wrong result\r\n      status: 0,\r\n      answerList: shuffleAnswers(\r\n        list[0]?.word,\r\n        list[0]?.phonetic,\r\n        list[0]?.wrongList,\r\n      ),\r\n      answerIndex: -1,\r\n    });\r\n    nRightConsecutive.current = { top: 0, n: 0 };\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex-center-col h-100vh container\">\r\n      <div className={`${classes.root} container dyno-game-box`}>\r\n        {/* title */}\r\n        <div className=\"dyno-game-title\">\r\n          <img src={logoGame} alt=\"game photo\" />\r\n          <h1>Hãy chọn từ đúng</h1>\r\n        </div>\r\n\r\n        {!isDone ? (\r\n          <>\r\n            {/* summary */}\r\n            <div className={`${classes.summary} flex-center-between`}>\r\n              <div className=\"flex-center--ver\">\r\n                Câu&nbsp;<b>{current + 1}</b>\r\n                &nbsp;/&nbsp;\r\n                <b>{nQuestion}</b>\r\n              </div>\r\n\r\n              <div className=\"flex-center--ver\">\r\n                <b>{nRight}</b>&nbsp;Đúng\r\n                <RightIcon className={`${classes.summaryIcon} right`} />\r\n                &nbsp;-&nbsp;\r\n                <b>{nWrong}</b>&nbsp;Sai\r\n                <WrongIcon className={`${classes.summaryIcon} wrong`} />\r\n              </div>\r\n            </div>\r\n\r\n            {/* body */}\r\n            <div\r\n              className={`${classes.mainContent} ${\r\n                status !== 0 ? 'disabled' : 'ani-fade'\r\n              }`}>\r\n              {/* question */}\r\n              <div className=\"flex-center-col\">\r\n                <p\r\n                  style={{ visibility: status === 0 ? 'hidden' : 'visible' }}\r\n                  className={`${classes.result} ${\r\n                    status === 1 ? 'right' : 'wrong'\r\n                  }`}>\r\n                  {status === 1 ? 'Chính xác' : 'Sai rồi'}\r\n                </p>\r\n                <span className={`${classes.question} t-center`}>{mean}</span>\r\n              </div>\r\n\r\n              {/* answers */}\r\n              <div className={classes.answers}>\r\n                {answerList.map((answer, index) => (\r\n                  <div\r\n                    onClick={() => onAnswer(answer.word, index)}\r\n                    className={`${\r\n                      classes.answerItem\r\n                    } flex-center-col p-5 ${addClassAnswerItem(\r\n                      status,\r\n                      answerIndex,\r\n                      index,\r\n                      word,\r\n                      answer.word,\r\n                    )}`}\r\n                    key={index}>\r\n                    <p className=\"mb-2 t-center\">{answer.word}</p>\r\n                    {answer.phonetic && (\r\n                      <span className=\"phonetic t-center\">\r\n                        /{answer.phonetic}/\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <CorrectWordResult\r\n            onReplay={handleReplay}\r\n            nRight={nRight}\r\n            nWrong={nWrong}\r\n            nRightConsecutive={nRightConsecutive.current.top}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nCorrectWord.propTypes = {\r\n  list: PropTypes.array,\r\n};\r\n\r\nCorrectWord.defaultProps = {\r\n  list: [],\r\n};\r\n\r\nexport default CorrectWord;\r\n","import ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport PlayIcon from '@material-ui/icons/PlayCircleFilledWhite';\r\nimport gameApi from 'apis/gameApi';\r\nimport GlobalLoading from 'components/UI/GlobalLoading';\r\nimport InputCustom from 'components/UI/InputCustom';\r\nimport React, { useRef, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { setMessage } from 'redux/slices/message.slice';\r\nimport CorrectWord from '.';\r\nimport WordPack from '../../UI/WordPack';\r\n\r\nconst MAX_LEN_WORD_PACK = 500;\r\n\r\nfunction CorrectWordData() {\r\n  // 0 - choose word pack, 1 - get pack, 2 - done\r\n  const [state, setState] = useState(0);\r\n  const [wordPack, setWordPack] = useState([]);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const nQuestion = useRef(50);\r\n\r\n  const getWordPackage = async ({ type, topics, level, specialty }) => {\r\n    try {\r\n      setState(1);\r\n\r\n      const n =\r\n        nQuestion.current < 0 || nQuestion.current > MAX_LEN_WORD_PACK\r\n          ? 100\r\n          : nQuestion.current;\r\n\r\n      const apiRes = await gameApi.getWordPackCWG(\r\n        type,\r\n        level,\r\n        specialty,\r\n        topics,\r\n        n,\r\n      );\r\n      if (apiRes.status === 200) {\r\n        const { wordPack = [] } = apiRes.data;\r\n        if (wordPack.length === 0) {\r\n          dispatch(\r\n            setMessage({\r\n              type: 'warning',\r\n              message:\r\n                'Rất xin lỗi, gói từ vựng hiện tại không đủ. Vui lòng thử lại sao',\r\n              duration: 3000,\r\n            }),\r\n          );\r\n          setState(0);\r\n          return;\r\n        }\r\n\r\n        setWordPack(wordPack);\r\n        setState(2);\r\n        return;\r\n      }\r\n\r\n      dispatch(\r\n        setMessage({\r\n          type: 'warning',\r\n          message: 'Lấy gói từ vựng thất bại, thử lại !',\r\n        }),\r\n      );\r\n      setState(0);\r\n    } catch (error) {\r\n      const message =\r\n        error.response?.data?.message || 'Lấy gói từ vựng thất bại, thử lại !';\r\n      dispatch(setMessage({ type: 'error', message }));\r\n      setState(0);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {state === 0 ? (\r\n        <WordPack\r\n          open={true}\r\n          onChoose={getWordPackage}\r\n          onCancel={() => history.goBack()}\r\n          topicMultiples={true}\r\n          title=\"Lựa chọn gói từ vựng\"\r\n          okBtnText=\"Bắt đầu\"\r\n          cancelBtnText=\"Quay lại\"\r\n          cancelBtnProps={{ startIcon: <ArrowBackIcon /> }}\r\n          okBtnProps={{ startIcon: <PlayIcon /> }}>\r\n          <InputCustom\r\n            type=\"number\"\r\n            inputProps={{\r\n              min: 5,\r\n              max: MAX_LEN_WORD_PACK,\r\n              defaultValue: 50,\r\n            }}\r\n            placeholder=\"Nhập số câu\"\r\n            label=\"Số câu\"\r\n            className=\"w-100\"\r\n            onChange={(e) => (nQuestion.current = e.target.value)}\r\n          />\r\n        </WordPack>\r\n      ) : state === 1 ? (\r\n        <GlobalLoading title=\"Đang tải gói câu hỏi ...\" />\r\n      ) : (\r\n        <CorrectWord list={wordPack} />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CorrectWordData;\r\n","import CorrectWordData from 'components/PlayGames/CorrectWord/data';\r\nimport useCloseNavigation from 'hooks/useCloseNavigation';\r\nimport useTitle from 'hooks/useTitle';\r\nimport React from 'react';\r\n\r\nfunction CorrectWordPage() {\r\n  useTitle(\"Game hãy chọn từ đúng (Let's choose the correct word)\");\r\n  useCloseNavigation();\r\n  return <CorrectWordData />;\r\n}\r\n\r\nexport default CorrectWordPage;\r\n"],"sourceRoot":""}